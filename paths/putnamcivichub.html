import React, { useState } from 'react';
import { Calendar, Users, FileText, MessageCircle, MapPin, DollarSign, Search, Bell, Phone, Mail, ExternalLink, ChevronRight, ChevronDown } from 'lucide-react';

const PutnamCivicHub = () => {
  const [activeTab, setActiveTab] = useState('dashboard');
  const [expandedSection, setExpandedSection] = useState(null);
  const [selectedIssue, setSelectedIssue] = useState(null);

  const toggleSection = (section) => {
    setExpandedSection(expandedSection === section ? null : section);
  };

  const currentIssues = [
    {
      id: 1,
      title: "FY 26 Budget Planning",
      status: "Active",
      priority: "High",
      description: "Town is developing FY 26 budget. Public input period open until March 15.",
      nextMeeting: "March 5, 2025",
      contactOfficial: "Town Administrator",
      actions: ["Attend Budget Meeting", "Submit Written Comments", "View Draft Budget"]
    },
    {
      id: 2,
      title: "Downtown Revitalization Phase 2",
      status: "Planning",
      priority: "Medium",
      description: "Continuation of Arts & Al Fresco downtown improvement initiative.",
      nextMeeting: "March 12, 2025",
      contactOfficial: "Economic Development Committee",
      actions: ["Join Planning Committee", "Business Owner Survey", "Community Input Session"]
    },
    {
      id: 3,
      title: "River Trail Expansion",
      status: "Funding",
      priority: "Medium",
      description: "Seeking state and federal grants for Putnam River Trail extension.",
      nextMeeting: "February 28, 2025",
      contactOfficial: "Parks & Recreation",
      actions: ["Support Grant Applications", "Volunteer for Trail Maintenance", "Provide Usage Data"]
    }
  ];

  const upcomingMeetings = [
    { date: "Feb 28", time: "7:00 PM", title: "Parks & Recreation Committee", location: "Town Hall" },
    { date: "Mar 5", time: "7:30 PM", title: "Board of Selectmen - Budget Review", location: "Town Hall" },
    { date: "Mar 12", time: "6:30 PM", title: "Economic Development Committee", location: "Town Hall" },
    { date: "Mar 19", time: "7:00 PM", title: "Board of Finance", location: "Town Hall" }
  ];

  const officials = [
    { name: "Mayor Smith", role: "Mayor", phone: "860-963-6800 x103", email: "mayor@putnamct.us", priority: "Local" },
    { name: "Jane Doe", role: "Town Administrator", phone: "860-963-6800 x113", email: "admin@putnamct.us", priority: "Local" },
    { name: "Rep. Johnson", role: "State Representative", phone: "860-240-xxxx", email: "rep.johnson@cga.ct.gov", priority: "State" },
    { name: "Sen. Williams", role: "State Senator", phone: "860-240-xxxx", email: "sen.williams@cga.ct.gov", priority: "State" }
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800">
      {/* Header */}
      <header className="bg-black shadow-lg border-b-2 border-blue-400">
        <div className="max-w-6xl mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-4">
              <div className="bg-blue-500 text-white p-2 rounded-lg shadow-lg">
                <Users className="h-6 w-6" />
              </div>
              <div>
                <h1 className="text-2xl font-bold text-white">Putnam Civic Hub</h1>
                <p className="text-sm text-gray-300">Your gateway to local government</p>
              </div>
            </div>
            <div className="flex items-center space-x-4">
              <button className="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors shadow-lg">
                <Bell className="h-4 w-4 inline mr-2" />
                3 Alerts
              </button>
              <div className="text-right text-sm text-white">
                <p className="font-medium">Putnam, CT 06260</p>
                <p className="text-gray-300">Population: 10,214</p>
              </div>
            </div>
          </div>
        </div>
      </header>

      {/* Navigation */}
      <nav className="bg-gray-900 border-b border-gray-700">
        <div className="max-w-6xl mx-auto px-4">
          <div className="flex space-x-1">
            {[
              { id: 'dashboard', label: 'Dashboard', icon: Users },
              { id: 'issues', label: 'Current Issues', icon: MessageCircle },
              { id: 'meetings', label: 'Meetings & Events', icon: Calendar },
              { id: 'officials', label: 'Your Representatives', icon: Phone },
              { id: 'documents', label: 'Documents', icon: FileText },
              { id: 'budget', label: 'Budget Explorer', icon: DollarSign }
            ].map((tab) => {
              const Icon = tab.icon;
              return (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`flex items-center space-x-2 px-4 py-3 transition-colors ${
                    activeTab === tab.id 
                      ? 'bg-blue-600 border-b-2 border-blue-400 text-white' 
                      : 'text-gray-300 hover:bg-gray-800 hover:text-white'
                  }`}
                >
                  <Icon className="h-4 w-4" />
                  <span className="font-medium">{tab.label}</span>
                </button>
              );
            })}
          </div>
        </div>
      </nav>

      {/* Main Content */}
      <main className="max-w-6xl mx-auto px-4 py-8">
        {activeTab === 'dashboard' && (
          <div className="space-y-6">
            {/* Quick Actions */}
            <div className="bg-gray-900 rounded-xl shadow-lg p-6 border border-gray-700">
              <h2 className="text-xl font-bold mb-4 text-white">Quick Actions</h2>
              <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                <button className="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition-all transform hover:scale-105 shadow-lg">
                  <MessageCircle className="h-6 w-6 mx-auto mb-2" />
                  <div className="text-sm font-medium">Report an Issue</div>
                </button>
                <button className="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-all transform hover:scale-105 shadow-lg">
                  <Calendar className="h-6 w-6 mx-auto mb-2" />
                  <div className="text-sm font-medium">Attend Next Meeting</div>
                </button>
                <button className="bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-all transform hover:scale-105 shadow-lg">
                  <Phone className="h-6 w-6 mx-auto mb-2" />
                  <div className="text-sm font-medium">Contact Official</div>
                </button>
                <button className="bg-orange-600 text-white p-4 rounded-lg hover:bg-orange-700 transition-all transform hover:scale-105 shadow-lg">
                  <FileText className="h-6 w-6 mx-auto mb-2" />
                  <div className="text-sm font-medium">View Budget</div>
                </button>
              </div>
            </div>

            {/* Active Issues Preview */}
            <div className="bg-gray-900 rounded-xl shadow-lg p-6 border border-gray-700">
              <div className="flex items-center justify-between mb-4">
                <h2 className="text-xl font-bold text-white">Active Issues Needing Input</h2>
                <button 
                  onClick={() => setActiveTab('issues')}
                  className="text-blue-400 hover:text-blue-300 font-medium flex items-center"
                >
                  View All <ChevronRight className="h-4 w-4 ml-1" />
                </button>
              </div>
              <div className="space-y-3">
                {currentIssues.slice(0, 2).map((issue) => (
                  <div key={issue.id} className="border-l-4 border-blue-500 bg-gray-800 p-4 rounded-r-lg">
                    <div className="flex justify-between items-start">
                      <div>
                        <h3 className="font-semibold text-white">{issue.title}</h3>
                        <p className="text-sm text-gray-300 mt-1">{issue.description}</p>
                        <p className="text-xs text-blue-400 mt-2">Next meeting: {issue.nextMeeting}</p>
                      </div>
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        issue.priority === 'High' ? 'bg-red-900 text-red-300' : 'bg-yellow-900 text-yellow-300'
                      }`}>
                        {issue.priority}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Upcoming Meetings */}
            <div className="bg-gray-900 rounded-xl shadow-lg p-6 border border-gray-700">
              <h2 className="text-xl font-bold mb-4 text-white">This Week's Meetings</h2>
              <div className="space-y-3">
                {upcomingMeetings.slice(0, 3).map((meeting, idx) => (
                  <div key={idx} className="flex items-center justify-between p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">
                    <div className="flex items-center space-x-4">
                      <div className="bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-sm font-medium">
                        {meeting.date}
                      </div>
                      <div>
                        <h4 className="font-medium text-white">{meeting.title}</h4>
                        <p className="text-sm text-gray-400">{meeting.time} â€¢ {meeting.location}</p>
                      </div>
                    </div>
                    <button className="text-blue-400 hover:text-blue-300">
                      <ExternalLink className="h-4 w-4" />
                    </button>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {activeTab === 'issues' && (
          <div className="space-y-6">
            <div className="bg-gray-900 rounded-xl shadow-lg p-6 border border-gray-700">
              <h2 className="text-2xl font-bold mb-6 text-white">Current Issues & Opportunities</h2>
              <div className="space-y-4">
                {currentIssues.map((issue) => (
                  <div key={issue.id} className="border border-gray-600 rounded-lg overflow-hidden">
                    <div 
                      className="p-4 bg-gray-800 cursor-pointer hover:bg-gray-700 transition-colors"
                      onClick={() => setSelectedIssue(selectedIssue === issue.id ? null : issue.id)}
                    >
                      <div className="flex justify-between items-start">
                        <div className="flex-1">
                          <div className="flex items-center space-x-3">
                            <h3 className="text-lg font-semibold text-white">{issue.title}</h3>
                            <span className={`px-2 py-1 text-xs rounded-full ${
                              issue.priority === 'High' ? 'bg-red-900 text-red-300' : 'bg-yellow-900 text-yellow-300'
                            }`}>
                              {issue.priority}
                            </span>
                            <span className={`px-2 py-1 text-xs rounded-full ${
                              issue.status === 'Active' ? 'bg-green-900 text-green-300' : 'bg-blue-900 text-blue-300'
                            }`}>
                              {issue.status}
                            </span>
                          </div>
                          <p className="text-gray-300 mt-2">{issue.description}</p>
                        </div>
                        <ChevronDown className={`h-5 w-5 text-gray-400 transition-transform ${
                          selectedIssue === issue.id ? 'rotate-180' : ''
                        }`} />
                      </div>
                    </div>
                    {selectedIssue === issue.id && (
                      <div className="p-4 bg-gray-900 border-t border-gray-600">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                          <div>
                            <h4 className="font-semibold mb-2 text-white">Key Information</h4>
                            <p className="text-sm text-gray-300 mb-2">
                              <strong>Next Meeting:</strong> {issue.nextMeeting}
                            </p>
                            <p className="text-sm text-gray-300">
                              <strong>Contact:</strong> {issue.contactOfficial}
                            </p>
                          </div>
                          <div>
                            <h4 className="font-semibold mb-2 text-white">How You Can Help</h4>
                            <div className="space-y-2">
                              {issue.actions.map((action, idx) => (
                                <button key={idx} className="block w-full text-left px-3 py-2 bg-blue-900 text-blue-300 rounded hover:bg-blue-800 transition-colors text-sm">
                                  {action}
                                </button>
                              ))}
                            </div>
                          </div>
                        </div>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {activeTab === 'officials' && (
          <div className="space-y-6">
            <div className="bg-gray-900 rounded-xl shadow-lg p-6 border border-gray-700">
              <h2 className="text-2xl font-bold mb-6 text-white">Your Representatives</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {officials.map((official, idx) => (
                  <div key={idx} className="border border-gray-600 rounded-lg p-4 hover:border-blue-400 transition-colors bg-gray-800">
                    <div className="flex justify-between items-start mb-3">
                      <div>
                        <h3 className="text-lg font-semibold text-white">{official.name}</h3>
                        <p className="text-gray-300">{official.role}</p>
                      </div>
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        official.priority === 'Local' ? 'bg-green-900 text-green-300' : 'bg-blue-900 text-blue-300'
                      }`}>
                        {official.priority}
                      </span>
                    </div>
                    <div className="space-y-2">
                      <div className="flex items-center space-x-2">
                        <Phone className="h-4 w-4 text-gray-400" />
                        <span className="text-sm text-gray-300">{official.phone}</span>
                      </div>
                      <div className="flex items-center space-x-2">
                        <Mail className="h-4 w-4 text-gray-400" />
                        <span className="text-sm text-gray-300">{official.email}</span>
                      </div>
                    </div>
                    <div className="mt-4 flex space-x-2">
                      <button className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                        Send Message
                      </button>
                      <button className="border border-gray-500 text-gray-300 px-3 py-1 rounded text-sm hover:bg-gray-700 transition-colors">
                        View Profile
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {activeTab === 'meetings' && (
          <div className="bg-gray-900 rounded-xl shadow-lg p-6 border border-gray-700">
            <h2 className="text-2xl font-bold mb-6 text-white">Meetings & Events</h2>
            <div className="space-y-4">
              {upcomingMeetings.map((meeting, idx) => (
                <div key={idx} className="border-l-4 border-blue-500 bg-gray-800 p-4 rounded-r-lg">
                  <div className="flex justify-between items-start">
                    <div>
                      <h3 className="font-semibold text-white">{meeting.title}</h3>
                      <p className="text-sm text-gray-300 mt-1">
                        <Calendar className="h-4 w-4 inline mr-1" />
                        {meeting.date} at {meeting.time}
                      </p>
                      <p className="text-sm text-gray-300">
                        <MapPin className="h-4 w-4 inline mr-1" />
                        {meeting.location}
                      </p>
                    </div>
                    <div className="space-x-2">
                      <button className="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                        Add to Calendar
                      </button>
                      <button className="border border-gray-500 text-gray-300 px-3 py-1 rounded text-sm hover:bg-gray-700 transition-colors">
                        View Agenda
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}
      </main>
    </div>
  );
};

export default PutnamCivicHub;